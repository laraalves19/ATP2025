print ("Jogo dos fósforos")
print ("Começamos o jogo com 21 fósferos na totalidade. Em cada jogada poderás retirar 1,2,3 ou 4 fósforos. Quem pegar no último fósfero perde o jogo. Vamos jogar!")
fósforos=21
#escolher a ordem de jogada 
y=int(input("Queres jogar em primeiro ou em segundo ligar?(1 ou 2)"))
while fósforos>1:
    print(f"Número de fósforos restantes: {fósforos}")
    #jogador joga em primeiro lugar
    if y==1: 
        while True:
            x=int(input("Introduza um número (1,2,3 ou 4): "))
            if x<1 or x>4 or x<fósforos-1:
                break
            print ("Número Inválido!Tente novamente!")
        fósforos=fósforos-x
        print (f"O jogador retira {x} fósforos, sobrando {fósforos} fósforos.")
        if fósforos==1:
            print("Sobrou 1 fósforo, o jogador perdeu o jogo!")
            break 
        #computador joga em segundo lugar
        jogada_pc= 5-x 
        if jogada_pc>fósforos-1:
            jogada_pc=1
        fósforos=fósforos-jogada_pc
        print (f"O computador retira {jogada_pc} fósforos, sobrando {fósforos} fósforos.")
        if fósforos==1:
            print ("Sobrou 1 fósforo, o jogador perdeu o jogo.")
            break
    #computador joga em primeiro lugar
    elif y==2:  
     # primeira jogada do computador, ainda não sabe o x 
     jogada_pc=1 
     fósforos=fósforos-jogada_pc
     print (f"O computador retira {jogada_pc} fósforos, sobrando {fósforos} fósforos.")
     if fósforos==1:
         print("Sobrou 1 fósforo, o jogador perdeu o jogo.")
         break 
     #jogador joga em segundo lugar 
     while True:
         x=int(input("Introduza um número (1,2,3 ou 4): ")) 
         if x<1 or x>4 and x<=fósforos-1:
            print ("Número Inválido!Tente novamente!")
            break
         fósforos=fósforos-x
         print (f"O jogador retira {x} fósforos, sobrando {fósforos} fósforos.")
         if fósforos==1:
            print("Sobrou 1 fósforo, o jogador ganhou o jogo!")
            break 
     #reação do computador à jogada do jogador
         jogada_pc=5-x
         if jogada_pc>fósforos-1:
             jogada_pc=1
         fósforos=fósforos-jogada_pc
         print (f"O computador retira {jogada_pc} fósforos, sobrando {fósforos} fósforos.")
         if fósforos==1:
            print ("Sobrou 1 fósforo, o jogador perdeu o jogo.")
            break 